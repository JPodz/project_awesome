<header class="main-box-header">
    <h2>Recent Referrals You've Created <span class="badge badge-info">{{total}}</span></h2>
</header>
<div class="main-box-body">
    <div class="table-responsive">
        <table class="table dataTable no-footer" ng-table="refByCreator" show-filter="true">
            <tbody>
            <tr ng-repeat="referral in $data">
                <td sortable="'refType'" data-title="'Referral Type'" filter="{ 'refType': 'select' }" filter-data="recentRefTypes">{{referral.refType}} Referral</td>
                <td sortable="'clientName'" data-title="'Client Name'" filter="{ 'clientName': 'text' }"><a href="/client/history/{{referral.client.id}}">{{referral.clientName}}</a></td>
                <td sortable="'nextStepDate'" data-title="'Next Steps Date'">{{referral.nextStepTimestamp | formatDate}}</td>
                <td sortable="'client.phoneNumber'" data-title="'Phone Number'"><a href="tel:+1{{referral.client.phoneNumber}}">{{referral.client.phoneNumber | telly}}</a></td>
                <td data-title="'Actions'"><a href="/editReferral/{{referral.id}}">Edit Referral</a> - <a href="#deleteModal" data-toggle="modal" data-referral="{{referral.id}}">Delete Referral</a></td>
                <td sortable="'lastEditedDate'" data-title="'Last Edited Date'">{{referral.lastEditedDate}}</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!--Delete referral modal-->
<div id="deleteModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4>Delete this referral?</h4>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" data-dismiss="modal">No</button>
                <button class="btn btn-primary">Yes</button>
            </div>
        </div>
    </div>
</div>