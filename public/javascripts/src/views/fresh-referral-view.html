<header class="main-box-header">
	<h2>Open Referrals Assigned To You <span class="badge badge-info">{{freshReferraltotal}}</span></h2>
</header>
<div class="main-box-body">
	<div class="table-responsive">
        <table class="table dataTable no-footer" show-filter="true" ng-table="freshReferralsTable">

            <tbody>
                <tr ng-repeat="referral in $data">
                    <td sortable="'refType'" data-title="'Referral Type'" filter="{ 'refType': 'select' }" filter-data="freshRefTypes">{{referral.refType}} Referral</td>
                    <td sortable="'clientName'" data-title="'Client Name'" filter="{ 'clientName': 'text' }"><a href="/client/history/{{referral.client.id}}">{{referral.clientName}}</a></td>
                    <td sortable="'nextStepDate'" data-title="'Next Steps Date'"><span tooltip="{{referral.refNotes}}" tooltip-trigger="mouseenter">{{referral.nextStepDate}}</span></td>
                    <td sortable="'client.phoneNumber'" data-title="'Phone Number'"><a href="tel:+1{{referral.client.phoneNumber}}">{{referral.client.phoneNumber | telly}}</a></td>
                    <td data-title="'Status'"><status-label status="referral.status" data-title="'Status'"></status-label></td>
                    <td data-title="'Actions'"><a href="/action/profile?refId={{referral.id}}">Begin Profile</a> - <a href="/editReferral/{{referral.id}}">Edit Referral</a> - <a href="#deleteModal" data-toggle="modal" data-referral="{{referral.id}}">Delete Referral</a></td>
                    <td sortable="'creatorName'" data-title="'Creator'" filter="{ 'creatorName': 'text' }">{{referral.creatorName}}</td>
                    <td sortable="'lastEditedDate'" data-title="'Last Edited Date'">{{referral.lastEditedDate}}</td>
                </tr>
            </tbody>
        </table>

        <div class="view-all">
            <div class="pull-left">
            <!--TODO: View all referrals page-->
                <a class="btn btn-primary pull-right" href="/action/team-referrals"><i class="fa fa-eye fa-lg"></i>
                View All Referrals Generated By Your Team
                </a>

            </div>
        </div>
	</div>
</div>

<!--Delete referral modal-->
<div id="deleteModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4>Delete this referral?</h4>
            </div>
            <div class="modal-body">
                <p class="alert alert-warning"><i class="fa fa-warning fa-fw fa-lg"></i> If a profile has been generated off of this referral and you delete this referral, you will no longer receive credit for the resulting profile. Any productivity generated by that profile will not be attached to your profile.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" data-dismiss="modal">No</button>
                <button class="btn btn-primary">Yes</button>
            </div>
        </div>
    </div>
</div>