<header class="main-box-header">
    <h2>Upcoming Appointments in the next 7 days <span class="badge badge-info">{{upcomingApptsTotal}}</span></h2>
</header>
<div class="main-box-body">
    <div class="table-responsive">
        <table class="table dataTable no-footer" show-filter="true" ng-table="upcomingApptsTable">

            <tbody>
            <tr ng-repeat="referral in $data">
                <td data-title="'Referral Type'">{{referral.refType}} Referral</td>
                <td sortable="'clientName'" data-title="'Client Name'" filter="{ 'clientName': 'text' }"><a href="/client/history/{{referral.client.id}}">{{referral.clientName}}</a></td>
                <td sortable="'nextStepDate'" data-title="'Next Steps Date'"><span tooltip="{{referral.refNotes}}" tooltip-trigger="mouseenter">{{referral.nextStepTimestamp | date:"MMM dd, yyyy 'at' h:mm a"}}</span></td>
                <td data-title="'Phone Number'"><a href="tel:+1{{referral.client.phoneNumber}}">{{referral.client.phoneNumber | telly}}</a></td>
                <td data-title="'Address'"><a href="/client/history/{{referral.client.id}}">{{referral.client.address}}</a></td>

                <td data-title="'Actions'" class="table-actions" header-class="'header-center'">
                    <div class="btn-group">
                        <button type="button" class="btn btn-default">Actions</button>
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" role="menu">
                            <li><a href="/editReferral/{{referral.id}}">Edit Referral</a></li>
                            <li class="divider"></li>
                            <li><a href="#deleteModal" data-toggle="modal" data-referral="{{referral.id}}">Delete Referral</a></li>
                        </ul>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>

    </div>
</div>

<!--Delete referral modal-->
<div id="deleteModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4>Delete this referral?</h4>
            </div>
            <div class="modal-body">
                <p class="alert alert-warning"><i class="fa fa-warning fa-fw fa-lg"></i> If a profile has been generated off of this referral and you delete this referral, you will no longer receive credit for the resulting profile. Any productivity generated by that profile will not be attached to your profile.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" data-dismiss="modal">No</button>
                <button class="btn btn-primary">Yes</button>
            </div>
        </div>
    </div>
</div>